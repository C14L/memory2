
<template>
    <link rel="stylesheet" href="/memory2/app-counter.css">
    <div id="counter">
        <div id="count">0</div>
        <div id="match">0</div>
        <div id="time">0</div>
    </div>
</template>

<script>

"use strict";

customElements.define('app-counter', class extends HTMLElement {

    static get observedAttributes () {
        return ['count', 'match', 'time'];
    }

    constructor () {
        super();

        const tpl = document.currentScript.ownerDocument.querySelector('template');
        this._shadowRoot = this.attachShadow({mode: 'open'});
        this._shadowRoot.appendChild(tpl.content.cloneNode(true));

        this._countEl = this._shadowRoot.getElementById('count');
        this._matchEl = this._shadowRoot.getElementById('match');
        this._timeEl = this._shadowRoot.getElementById('time');
    }

    connectedCallback () {
    }

    disconnectedCallback () {
    }

    attributeChangedCallback (name, oldValue, newValue) {
        if (name === 'count') {
            this._countEl.innerHTML = newValue;
        }
        if (name === 'match') {
            this._matchEl.innerHTML = newValue;
        }
        if (name === 'time' && newValue == "1") {
            this.startTimer();
        }
    }

    startTimer () {
        let t = 0;
        setInterval(() => { this._timeEl.innerHTML = ++t; }, 1000);
    }

});

</script>
